<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.min.js"></script>
    <title>Basic Scatter Plot</title>
    <style>
      body {
        margin: 0px;
      }
      .domain {
        display: none;
      }
      .tick line {
        stroke: #C0C0BB;
      }
      .tick text, .legendCells text {
        fill: #8E8883;
        font-family: sans-serif;
      }
      .axis-label{
        fill: #635F5D;
        font-family: sans-serif;
        font-size: 23px;
      }

      .legend-label {
        fill: #635F5D;
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <svg id="svgscatter" width="960" height="500"></svg>
    <script>
      const xValue = d => d["Log of GDP per person, 2015-2017"];
      const xLabel = 'Log of GDP per person, 2015-2017';
      const yValue = d => d["Life ladder, 2015-2017"];
      const yLabel = 'Life ladder, 2015-2017';
      const colorValue = d => d["Region indicator"];
      const colorLabel = 'Regions';
      const margin = { top: 50, right: 300, bottom: 50, left: 50 };

      const svg = d3.select('#svgscatter');
      const width = svg.attr('width');
      const height = svg.attr('height');
      const innerWidth = width - margin.left - margin.right;
      const innerHeight = height - margin.top - margin.bottom;

      const g = svg.append('g')
          .attr('transform', `translate(${margin.left},${margin.top})`);
      const xAxisG = g.append('g')
          .attr('transform', `translate(0, ${innerHeight})`);
      const yAxisG = g.append('g');
      const colorLegendG = g.append('g')
          .attr('transform', `translate(${innerWidth + 60}, 150)`);

      xAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', innerWidth / 2)
          .attr('y', 100)
          .text(xLabel);

      yAxisG.append('text')
          .attr('class', 'axis-label')
          .attr('x', -innerHeight / 2)
          .attr('y', -60)
          .attr('transform', `rotate(-90)`)
          .style('text-anchor', 'middle')
          .text(yLabel);

      colorLegendG.append('text')
          .attr('class', 'legend-label')
          .attr('x', -30)
          .attr('y', -40)
          .text(colorLabel);

      const xScale = d3.scaleLinear();
      const yScale = d3.scaleLinear();
      const colorScale = d3.scaleOrdinal()
        .range(d3.schemeCategory10);

      const xAxis = d3.axisBottom()
        .scale(xScale)
        .tickPadding(15)
        .tickSize(-innerHeight);

      const yAxis = d3.axisLeft()
        .scale(yScale)
        .ticks(5)
        .tickPadding(15)
        .tickSize(-innerWidth);

      const colorLegend = d3.legendColor()
        .scale(colorScale)
        .shape('circle');

      const row = d => {
        d["Log of GDP per person, 2015-2017"] = +d["Log of GDP per person, 2015-2017"];
        d["Life ladder, 2015-2017"] = +d["Life ladder, 2015-2017"];
        return d;
      };

      d3.csv('happiness_data.csv', row, data => {
        xScale
          .domain(d3.extent(data, xValue))
          .range([0, innerWidth])
          .nice();

        yScale
          .domain(d3.extent(data, yValue))
          .range([innerHeight, 0])
          .nice();

        g.selectAll('circle').data(data)
          .enter().append('circle')
            .attr('cx', d => xScale(xValue(d)))
            .attr('cy', d => yScale(yValue(d)))
            .attr('fill', d => colorScale(colorValue(d)))
            .attr('fill-opacity', 0.6)
            .attr('r', 8);

        xAxisG.call(xAxis);
        yAxisG.call(yAxis);
        colorLegendG.call(colorLegend)
          .selectAll('.cell text')
            .attr('dy', '0.1em');
      });
    </script>
  </body>
</html>


<!-- <html>
  <head>
    <meta charset="utf-8">
    <title>Visualization</title>
    <link rel="stylesheet" href="scatter.css" charset="utf-8">
  </head>
  <body>
    <div class="money">
      <h1>Money plays a key role in an individual's life satisfaction.</h1>
      <p>
  When you ask an individual whether or not they are satisfied with their life there are a variety of
  factors that are evaluated. An individual may rate their life according to what has happened
  recently in their life whether they have lost a job, moved to a new place, got a promotion etc.
  Some may evaluate their life according to their life goals as to what age they are on and what
  have they achieved. Now most of the people might evaluate their life satisfaction by how much
  money they earn i.e. Their income. The higher the income of a person, he evaluates himself to
  be more satisfied with life.Indeed, citizens' satisfaction is related to how much money they
  make.
</p>
    <div id="scatter"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.6.7/d3-tip.js">	 </script>
    <script src="scatter.js" charset="utf-8"></script>
  </body>
</html> -->
